<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>é¤å…æ–‡å­—è¯„è®º</title>
  <style>
    :root{
      --bg:#f8f9fa;
      --card:#ffffff;
      --text:#212529;
      --sub:#6c757d;
      --brand:#007bff;
      --muted:#dee2e6;
      --accent:#28a745;
      --gutter:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--text); font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial}

    .app{max-width:520px; margin:0 auto; min-height:100%; display:flex; flex-direction:column}

    header{position:sticky; top:0; z-index:10; background:#fff; border-bottom:1px solid var(--muted)}
    .safe{padding: env(safe-area-inset-top) env(safe-area-inset-right) 0 env(safe-area-inset-left)}
    .head{display:flex; align-items:center; gap:12px; padding:14px calc(var(--gutter) + env(safe-area-inset-right)) 12px calc(var(--gutter) + env(safe-area-inset-left));}
    .logo{width:40px; height:40px; border-radius:12px; background:var(--brand)}
    .title-wrap{flex:1}
    h1{margin:0; font-size:18px}
    .meta{font-size:12px; color:var(--sub); display:flex; gap:10px; align-items:center}
    .star{color:#ffc107}

    main{padding:8px calc(var(--gutter) + env(safe-area-inset-right)) 24px calc(var(--gutter) + env(safe-area-inset-left));}

    .filter{display:flex; gap:8px; padding:8px calc(var(--gutter) + env(safe-area-inset-right)) 12px calc(var(--gutter) + env(safe-area-inset-left));overflow:auto; scrollbar-width:none;
  scroll-padding-left: calc(var(--gutter) + env(safe-area-inset-left)); }
    .chip{padding:8px 12px; font-size:12px; border:1px solid var(--muted); border-radius:999px; color:var(--sub); background:#f8f9fa; white-space:nowrap}
    .chip.active{border-color:var(--brand); color:var(--brand); background:#e9f5ff}

    .card{background:var(--card); border:1px solid var(--muted); border-radius:16px; padding:12px; margin:10px 0; box-shadow:0 2px 6px rgba(0,0,0,0.05)}
    .row{display:flex; gap:12px}
    .avatar{width:40px; height:40px; border-radius:50%; background:#e9ecef; display:grid; place-items:center; color:#495057; font-weight:700}
    .who{flex:1}
    .who .name{font-size:14px; font-weight:600}
    .who .sub{font-size:12px; color:var(--sub)}
    .who .tags{margin-top:4px; display:flex; flex-wrap:wrap; gap:6px}
    .tag{font-size:10px; padding:4px 8px; border-radius:999px; border:1px solid var(--muted); color:#6c757d}

    .content{margin-top:10px; font-size:14px; line-height:1.65; color:var(--text)}
    .content.clamp{display:-webkit-box; -webkit-line-clamp:4; -webkit-box-orient:vertical; overflow:hidden}
    .more{margin-top:6px; border:none; background:transparent; color:var(--brand); font-size:12px; padding:0; cursor:pointer}

    /* å›¾ç‰‡åŒºåŸŸ */
    .photos{margin-top:10px}
    .grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:6px}
    .thumb{width:100%; aspect-ratio:1/1; border-radius:10px; border:1px solid var(--muted); background:#f8f9fa; overflow:hidden; position:relative; cursor:pointer}
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}

    /* å…¨å±å›¾ç‰‡æŸ¥çœ‹ */
    .viewer{position:fixed; inset:0; background:rgba(0,0,0,.75); display:none; align-items:center; justify-content:center; z-index:50}
    .viewer img{max-width:92vw; max-height:86vh; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.4)}
    .viewer.show{display:flex}

    footer{color:var(--sub); font-size:12px; text-align:center; padding:24px 8px 32px}
    .spacer{height: env(safe-area-inset-bottom)}
  </style>
</head>
<body>
  <div class="app">
    <header class="safe">
      <div class="head">
        <div class="logo" aria-hidden="true"></div>
        <div class="title-wrap">
          <h1>Xé¤å…</h1>
          <div class="meta">
            <span class="star">â˜… â˜… â˜… â˜… â˜†</span>
            <span>4.3 Â· 182 æ¡è¯„è®º</span>
            <span>Â·</span>
            <span></span>
          </div>
        </div>
      </div>
      <div class="filter" role="tablist" aria-label="ç­›é€‰">
        <div class="chip active" role="tab" aria-selected="true">å…¨éƒ¨</div>
        <div class="chip" role="tab">ç¯å¢ƒå¥½</div>
        <div class="chip" role="tab">ä¸Šèœå¿«</div>
        <div class="chip" role="tab">é€‚åˆèšä¼š</div>
        <div class="chip" role="tab">æœåŠ¡ä½³</div>
      </div>
    </header>

    <main id="list"></main>


  </div>

  <!-- å›¾ç‰‡æŸ¥çœ‹å™¨ -->
  <div class="viewer" id="viewer" aria-hidden="true">
    <img alt="é¢„è§ˆ" id="viewerImg" />
  </div>

  <template id="card-tpl">
    <article class="card" data-id="">
      <div class="row">
        <div class="avatar" aria-hidden="true">ğŸ“</div>
        <div class="who">
          <div class="name">è®¿å®¢</div>
          <div class="sub">
            <span class="date">2025-09-17</span>
            Â· <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
          </div>
          <div class="tags"></div>
        </div>
      </div>

      <div class="content clamp"></div>
      <button class="more" hidden>å±•å¼€å…¨æ–‡</button>

      <!-- å›¾ç‰‡åŒºåŸŸï¼ˆè‹¥æ— å›¾ç‰‡å°†è‡ªåŠ¨éšè—ï¼‰ -->
      <div class="photos">
        <div class="grid"></div>
      </div>
    </article>
  </template>

  <script>
    // â€”â€” æ‰‹å†™æ•°ç»„ï¼ˆæ¯æ¡å¯ç‹¬ç«‹æ”¹ï¼‰â€”â€”
    const reviews = [
      { id:1, name:"ç”¨æˆ· 1", date:"2025-09-17", stars:"â˜…â˜…â˜…â˜…â˜…", content:"å’Œæœ‹å‹å°èšï¼Œç”œå“èœå“éƒ½å¾ˆæœ‰è¶£ï¼Œæ¸…æ·¡ä½†å¥½åƒï¼Œå¾ˆæ£’çš„ä¸€æ¬¡ä½“éªŒ", photos:["image/1-1.jpg","image/1-2.jpg","image/1-3.jpg"] },
      { id:2, name:"ç”¨æˆ·2", date:"2025-09-10", stars:"â˜…â˜…â˜…â˜…â˜†", content:"ç»å¸¸æ¥åƒï¼Œå‘³é“éå¸¸å¥½ã€‚ç¯å¢ƒå¾ˆå®‰é™ä¼˜é›…ï¼ŒæœåŠ¡æ€åº¦å¾ˆå¥½ï¼Œè¿˜ä¼šå†æ¥çš„", photos:["image/2-1.jpg","image/2-2.jpg","image/2-3.jpg"] },
      { id:3, name:"ç”¨æˆ· 3", date:"2025-09-04", stars:"â˜…â˜†â˜†â˜†â˜†", content:"ä¸€å®¶ç§è‰å¾ˆä¹…çš„åº—ï¼Œèšé¤çš„æ—¶å€™å°±ä¸€èµ·æ¥è¯•è¯•äº†ã€‚ç»“æœâ€¦é¡ºåˆ©æ‹”è‰ï¼Œç¯é»‘èœå°‘å‘³é“å·®", photos:["image/3-1.jpg","image/3-2.jpg"] },
      { id:4, name:"ç”¨æˆ· 4", date:"2025-08-19", stars:"â˜…â˜…â˜…â˜…â˜…", content:" æ•´ä½“èµ°æ¸…çˆ½èåˆè·¯çº¿ï¼Œè°ƒå‘³ä¸é‡å´æœ‰å±‚æ¬¡ï¼Œåƒè’œé¦™è˜‘è‡é…å«©ç‰›æ’è¿™ç§ä¸­è¥¿æ­é…å¾ˆèˆ’æœï¼Œåƒå®Œæ²¡æœ‰è´Ÿæ‹…ï¼Œé€‚åˆèšä¼šã€‚", photos:["image/4-1.jpg","image/4-2.jpg","image/4-3.jpg"] },
      { id:5, name:"ç”¨æˆ· 5", date:"2025-08-18", stars:"â˜…â˜…â˜…â˜…â˜†", content:" ç¯å¢ƒå¾ˆå¥½ï¼Œä¸»æ‰“èåˆèœï¼Œå¾ˆæœ‰è¶£ï¼Œä¸‹æ¬¡è¿˜ä¼šå†æ¥", photos:["image/5-1.jpg","image/5-2.jpg","image/5-3.jpg"] },
      { id:6, name:"ç”¨æˆ· 6", date:"2025-08-18", stars:"â˜…â˜…â˜…â˜†â˜†", content:" é¤å…æœåŠ¡æœ‰ç¤¼ï¼Œä¸Šèœé¡ºç•…ï¼›èœå•é‡Œæœ‰ä¸å°‘æœé¦™ä¸æµ·é²œçš„ç»„åˆï¼Œæ¸…æ–°è§£è…»ï¼Œé€‚åˆè¿åƒå¤šé“ä¹Ÿä¸è…»ã€‚", photos:["image/6-1.jpg","image/6-2.jpg","image/6-3.jpg"] },
      { id:7, name:"ç”¨æˆ· 7", date:"2025-08-08", stars:"â˜…â˜…â˜…â˜…â˜…", content:"ç¯å¢ƒå¾ˆé›…è‡´ï¼Œèœçš„å‘³é“ä¹Ÿä¸é”™ï¼Œé¸¡å’Œè™¾éƒ½èƒ½å°å¾—å‡ºéå¸¸æ–°é²œ", photos:["image/7-1.jpg","image/7-2.jpg","image/7-3.jpg"] },
      { id:8, name:"ç”¨æˆ· 8", date:"2025-08-03", stars:"â˜…â˜…â˜…â˜…â˜†", content:" èåˆä¸æµ®å¤¸ã€ç»†èŠ‚è§åŠŸåŠ›ï¼›æ¿æ —é…±æ±é¸¡å¼ºçƒˆæ¨èã€‚", photos:["image/8-1.jpg","image/8-2.jpg"] },
      { id:9, name:"ç”¨æˆ· 9", date:"2025-08-02", stars:"â˜…â˜…â˜…â˜…â˜†", content:"å¾ˆå–œæ¬¢çš„ä¸€å®¶åº—ï¼Œä»ç¯å¢ƒåˆ°èœå“å†åˆ°æœåŠ¡éƒ½å¾ˆæ£’ï¼", photos:["image/9-1.jpg","image/9-2.jpg","image/9-3.jpg"] },
      { id:10, name:"ç”¨æˆ· 10", date:"2025-08-02", stars:"â˜…â˜…â˜…â˜…â˜…", content:"éå¸¸æ£’çš„ä¸€å®¶èåˆèœé¦†ï¼Œä¸ç®¡æ˜¯è¥¿é¤çš„æŠ«è¨è¿˜æ˜¯ä¸­é¤çš„ç‚’èœéƒ½è¶…é¢„æœŸäº†ï¼", photos:["image/10-1.jpg","image/10-2.jpg"] }
    ];

    const $list = document.getElementById('list');
    const tpl = document.getElementById('card-tpl');

    // æ¸²æŸ“å¡ç‰‡
    function createCard(data){
      const node = tpl.content.cloneNode(true);
      const card = node.querySelector('.card');
      card.dataset.id = data.id;

      card.querySelector('.name').textContent = data.name;
      card.querySelector('.date').textContent = data.date;
      card.querySelector('.stars').textContent = data.stars;

      // æ ‡ç­¾
      const tagsWrap = card.querySelector('.tags');
      (data.tags||[]).forEach(t=>{
        const s = document.createElement('span');
        s.className = 'tag';
        s.textContent = t;
        tagsWrap.appendChild(s);
      });

      // æ–‡æœ¬å†…å®¹ + å±•å¼€/æ”¶èµ·
      const contentEl = card.querySelector('.content');
      const moreBtn = card.querySelector('.more');
      contentEl.textContent = data.content || '';
      // å…ˆé»˜è®¤æŠ˜å ï¼Œç­‰æ’å…¥ DOM åæ£€æµ‹æ˜¯å¦éœ€è¦â€œå±•å¼€â€æŒ‰é’®
      requestAnimationFrame(()=>{
        // ä»…å½“è¶…å‡ºè¡Œé«˜æ‰æ˜¾ç¤ºâ€œå±•å¼€â€æŒ‰é’®
        if(contentEl.scrollHeight - contentEl.clientHeight > 2){
          moreBtn.hidden = false;
        }
      });
      moreBtn.addEventListener('click', ()=>{
        const clamped = contentEl.classList.contains('clamp');
        contentEl.classList.toggle('clamp');
        moreBtn.textContent = clamped ? 'æ”¶èµ·' : 'å±•å¼€å…¨æ–‡';
      });

      // å›¾ç‰‡
      const photosWrap = card.querySelector('.photos');
      const grid = card.querySelector('.photos .grid');
      if(Array.isArray(data.photos) && data.photos.length){
        data.photos.forEach((src,idx)=>{
          const box = document.createElement('div');
          box.className = 'thumb';
          const img = document.createElement('img');
          img.src = src; img.alt = `å›¾ç‰‡${idx+1}`;
          box.appendChild(img);
          box.addEventListener('click', ()=> openViewer(src));
          grid.appendChild(box);
        });
      }else{
        photosWrap.style.display = 'none';
      }

      return node;
    }

    // æ¸²æŸ“åˆ—è¡¨
    function render(){
      $list.innerHTML = '';
      reviews.forEach(r=>{ $list.appendChild(createCard(r)); });
    }
    render();

    // ç®€æ˜“å›¾ç‰‡æŸ¥çœ‹å™¨
    const viewer = document.getElementById('viewer');
    const viewerImg = document.getElementById('viewerImg');
    function openViewer(src){ viewerImg.src = src; viewer.classList.add('show'); viewer.setAttribute('aria-hidden','false'); }
    viewer.addEventListener('click', ()=>{ viewer.classList.remove('show'); viewer.setAttribute('aria-hidden','true'); viewerImg.removeAttribute('src'); });
  </script>
</body>
</html>
